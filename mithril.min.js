(function(){function B(a,d,e,f,h,p){return{tag:a,key:d,attrs:e,children:f,text:h,dom:p,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}function M(a){return"string"===typeof a&&0<a.length}function C(a){var d={},e=1,f;if(null==a||"string"!==typeof a&&"function"!==typeof a&&"function"!==typeof a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a){var h;if(!(h=N[a])){for(var p="div",k=[],w={};h=Q.exec(a);){var m=h[1],l=h[2];
""===m&&""!==l?p=l:"#"===m?w.id=l:"."===m?k.push(l):"["===h[3][0]&&((m=h[6])&&(m=m.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===h[4]?k.push(m):w[h[4]]=m||!0)}0<k.length&&(w.className=k.join(" "));h=N[a]={tag:p,attrs:w}}}if(arguments.length===e+1)M(arguments[e])&&arguments[e].startsWith(".")?d["class"]=arguments[e].substring(1).replace("."," "):"object"!==typeof arguments[e]||Array.isArray(arguments[e])?f=arguments[e]:d=Object.assign(d,arguments[e]),Array.isArray(f)||(f=[f]);else for(f=
[];e<arguments.length;)M(arguments[e])&&arguments[e].startsWith(".")?d["class"]=arguments[e].substring(1).replace("."," "):"object"!==typeof arguments[e]||Array.isArray(arguments[e])?f.push(arguments[e]):d=Object.assign(d,arguments[e]),e++;e=B.normalizeChildren(f);if("string"===typeof a){f=h;h=!1;var u,b,p=d.className||d["class"],q;for(q in f.attrs)O.call(f.attrs,q)&&(d[q]=f.attrs[q]);void 0!==p&&(void 0!==d["class"]&&(d["class"]=void 0,d.className=p),null!=f.attrs.className&&(d.className=f.attrs.className+
" "+p));for(q in d)if(O.call(d,q)&&"key"!==q){h=!0;break}Array.isArray(e)&&1===e.length&&null!=e[0]&&"#"===e[0].tag?b=e[0].children:u=e;return B(f.tag,d.key,h?d:void 0,u,b)}return B(a,d.key,d,e)}function R(a){var d=0,e=null,f="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var h=Date.now();0===d||16<=h-d?(d=h,a()):null===e&&(e=f(function(){e=null;a();d=Date.now()},16-(h-d)))}}B.normalize=function(a){return Array.isArray(a)?B("[",void 0,void 0,B.normalizeChildren(a),
void 0,void 0):null!=a&&"object"!==typeof a?B("#",void 0,void 0,!1===a?"":a,void 0,void 0):a};B.normalizeChildren=function(a){for(var d=0;d<a.length;d++)a[d]=B.normalize(a[d]);return a};var Q=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,N={},O={}.hasOwnProperty;C.trust=function(a){null==a&&(a="");return B("<",void 0,void 0,a,void 0,void 0)};C.fragment=function(a,d){return B("[",a.key,a,B.normalizeChildren(d),void 0,void 0)};var x=function(a){function d(a,b){return function r(d){var k;
try{if(!b||null==d||"object"!==typeof d&&"function"!==typeof d||"function"!==typeof(k=d.then))l(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",d);for(var e=0;e<a.length;e++)a[e](d);h.length=0;p.length=0;m.state=b;m.retry=function(){r(d)}});else{if(d===f)throw new TypeError("Promise can't be resolved w/ itself");e(k.bind(d))}}catch(S){w(S)}}}function e(a){function b(b){return function(a){0<d++||b(a)}}var d=0,e=b(w);try{a(b(k),e)}catch(A){e(A)}}if(!(this instanceof
x))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");var f=this,h=[],p=[],k=d(h,!0),w=d(p,!1),m=f._instance={resolvers:h,rejectors:p},l="function"===typeof setImmediate?setImmediate:setTimeout;e(a)};x.prototype.then=function(a,d){function e(a,d,e,k){d.push(function(b){if("function"!==typeof a)e(b);else try{h(a(b))}catch(q){p&&p(q)}});"function"===typeof f.retry&&k===f.state&&f.retry()}var f=this._instance,h,p,k=new x(function(a,
d){h=a;p=d});e(a,f.resolvers,h,!0);e(d,f.rejectors,p,!1);return k};x.prototype["catch"]=function(a){return this.then(null,a)};x.resolve=function(a){return a instanceof x?a:new x(function(d){d(a)})};x.reject=function(a){return new x(function(d,e){e(a)})};x.all=function(a){return new x(function(d,e){var f=a.length,h=0,p=[];if(0===a.length)d([]);else for(var k=0;k<a.length;k++)(function(k){function m(a){h++;p[k]=a;h===f&&d(p)}null==a[k]||"object"!==typeof a[k]&&"function"!==typeof a[k]||"function"!==
typeof a[k].then?m(a[k]):a[k].then(m,e)})(k)})};x.race=function(a){return new x(function(d,e){for(var f=0;f<a.length;f++)a[f].then(d,e)})};"undefined"!==typeof window?("undefined"===typeof window.Promise&&(window.Promise=x),x=window.Promise):"undefined"!==typeof global&&("undefined"===typeof global.Promise&&(global.Promise=x),x=global.Promise);var F=function(a){function d(a,f){if(Array.isArray(f))for(var h=0;h<f.length;h++)d(a+"["+h+"]",f[h]);else if("[object Object]"===Object.prototype.toString.call(f))for(h in f)d(a+
"["+h+"]",f[h]);else e.push(encodeURIComponent(a)+(null!=f&&""!==f?"="+encodeURIComponent(f):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var e=[],f;for(f in a)d(f,a[f]);return e.join("&")},T=/^file:\/\//i,K=function(a,d){function e(){function b(){0===--a&&"function"===typeof u&&u()}var a=0;return function A(d){var e=d.then;d.then=function(){a++;var h=e.apply(d,arguments);h.then(b,function(d){b();if(0===a)throw d;});return A(h)};return d}}function f(b,a){if("string"===typeof b){var d=
b;b=a||{};null==b.url&&(b.url=d)}return b}function h(b,a){if(null==a)return b;for(var d=b.match(/:[^\/]+/gi)||[],e=0;e<d.length;e++){var h=d[e].slice(1);null!=a[h]&&(b=b.replace(d[e],a[h]))}return b}function p(b,a){var d=F(a);if(""!==d){var e=0>b.indexOf("?")?"?":"&";b+=e+d}return b}function k(b){try{return""!==b?JSON.parse(b):null}catch(q){throw Error(b);}}function w(b){return b.responseText}function m(b,a){if("function"===typeof b)if(Array.isArray(a))for(var d=0;d<a.length;d++)a[d]=new b(a[d]);
else return new b(a);return a}var l=0,u;return{request:function(b,l){var q=e();b=f(b,l);var u=new d(function(d,e){null==b.method&&(b.method="GET");b.method=b.method.toUpperCase();var f="GET"===b.method||"TRACE"===b.method?!1:"boolean"===typeof b.useBody?b.useBody:!0;"function"!==typeof b.serialize&&(b.serialize="undefined"!==typeof FormData&&b.data instanceof FormData?function(g){return g}:JSON.stringify);"function"!==typeof b.deserialize&&(b.deserialize=k);"function"!==typeof b.extract&&(b.extract=
w);b.url=h(b.url,b.data);f?b.data=b.serialize(b.data):b.url=p(b.url,b.data);var l=new a.XMLHttpRequest,u=!1,q=l.abort;l.abort=function(){u=!0;q.call(l)};l.open(b.method,b.url,"boolean"===typeof b.async?b.async:!0,"string"===typeof b.user?b.user:void 0,"string"===typeof b.password?b.password:void 0);b.serialize===JSON.stringify&&f&&l.setRequestHeader("Content-Type","application/json; charset=utf-8");b.deserialize===k&&l.setRequestHeader("Accept","application/json, text/*");b.withCredentials&&(l.withCredentials=
b.withCredentials);for(var r in b.headers)({}).hasOwnProperty.call(b.headers,r)&&l.setRequestHeader(r,b.headers[r]);"function"===typeof b.config&&(l=b.config(l,b)||l);l.onreadystatechange=function(){if(!u&&4===l.readyState)try{var g=b.extract!==w?b.extract(l,b):b.deserialize(b.extract(l,b));if(200<=l.status&&300>l.status||304===l.status||T.test(b.url))d(m(b.type,g));else{var c=Error(l.responseText),n;for(n in g)c[n]=g[n];e(c)}}catch(v){e(v)}};f&&null!=b.data?l.send(b.data):l.send()});return!0===b.background?
u:q(u)},jsonp:function(b,k){var u=e();b=f(b,k);var q=new d(function(d,e){var f=b.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+l++,k=a.document.createElement("script");a[f]=function(e){k.parentNode.removeChild(k);d(m(b.type,e));delete a[f]};k.onerror=function(){k.parentNode.removeChild(k);e(Error("JSONP request failed"));delete a[f]};null==b.data&&(b.data={});b.url=h(b.url,b.data);b.data[b.callbackKey||"callback"]=f;k.src=p(b.url,b.data);a.document.documentElement.appendChild(k)});
return!0===b.background?q:u(q)},setCompletionCallback:function(b){u=b}}}(window,x),P=function(a){function d(g,c,n,b,a,d,f){for(;n<b;n++){var v=c[n];null!=v&&e(g,v,a,f,d)}}function e(g,c,n,b,a){var v=c.tag;if("string"===typeof v)switch(c.state={},null!=c.attrs&&C(c.attrs,c,n),v){case "#":return c.dom=D.createTextNode(c.children),l(g,c.dom,a),c.dom;case "<":return f(g,c,a);case "[":var m=D.createDocumentFragment();null!=c.children&&(v=c.children,d(m,v,0,v.length,n,null,b));c.dom=m.firstChild;c.domSize=
m.childNodes.length;l(g,m,a);return m;default:var k=c.tag;switch(c.tag){case "svg":b="http://www.w3.org/2000/svg";break;case "math":b="http://www.w3.org/1998/Math/MathML"}var t=(v=c.attrs)&&v.is,k=b?t?D.createElementNS(b,k,{is:t}):D.createElementNS(b,k):t?D.createElement(k,{is:t}):D.createElement(k);c.dom=k;if(null!=v)for(m in t=b,v)A(c,m,null,v[m],t);l(g,k,a);null!=c.attrs&&null!=c.attrs.contenteditable?u(c):(null!=c.text&&(""!==c.text?k.textContent=c.text:c.children=[B("#",void 0,void 0,c.text,
void 0,void 0)]),null!=c.children&&(g=c.children,d(k,g,0,g.length,n,null,b),g=c.attrs,"select"===c.tag&&null!=g&&("value"in g&&A(c,"value",null,g.value,void 0),"selectedIndex"in g&&A(c,"selectedIndex",null,g.selectedIndex,void 0))));return k}else return h(c,n),null!=c.instance?(n=e(g,c.instance,n,b,a),c.dom=c.instance.dom,c.domSize=null!=c.dom?c.instance.domSize:0,l(g,n,a),c=n):(c.domSize=0,c=J),c}function f(g,c,n){var b={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",
td:"tr",colgroup:"table",col:"colgroup"}[(c.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",b=D.createElement(b);b.innerHTML=c.children;c.dom=b.firstChild;c.domSize=b.childNodes.length;c=D.createDocumentFragment();for(var a;a=b.firstChild;)c.appendChild(a);l(g,c,n);return c}function h(g,c){var n;if("function"===typeof g.tag.view){g.state=Object.create(g.tag);n=g.state.view;if(null!=n.$$reentrantLock$$)return J;n.$$reentrantLock$$=!0}else{g.state=void 0;n=g.tag;if(null!=n.$$reentrantLock$$)return J;
n.$$reentrantLock$$=!0;g.state=null!=g.tag.prototype&&"function"===typeof g.tag.prototype.view?new g.tag(g):g.tag(g)}g._state=g.state;null!=g.attrs&&C(g.attrs,g,c);C(g._state,g,c);g.instance=B.normalize(g._state.view.call(g.state,g));if(g.instance===g)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null}function p(g,c,n,a,f,h,p){if(c!==n&&(null!=c||null!=n))if(null==c)d(g,n,0,n.length,f,h,void 0);else if(null==n)b(c,0,c.length,n);else{if(c.length===n.length){for(var v=
!1,t=0;t<n.length;t++)if(null!=n[t]&&null!=c[t]){v=null==n[t].key&&null==c[t].key;break}if(v){for(t=0;t<c.length;t++)c[t]!==n[t]&&(null==c[t]&&null!=n[t]?e(g,n[t],f,p,m(c,t+1,h)):null==n[t]?b(c,t,t+1,n):k(g,c[t],n[t],f,m(c,t+1,h),a,p));return}}if(!a)a:{if(null!=c.pool&&Math.abs(c.pool.length-n.length)<=Math.abs(c.length-n.length)&&(a=n[0]&&n[0].children&&n[0].children.length||0,Math.abs((c.pool[0]&&c.pool[0].children&&c.pool[0].children.length||0)-a)<=Math.abs((c[0]&&c[0].children&&c[0].children.length||
0)-a))){a=!0;break a}a=!1}if(a){var u=c.pool;c=c.concat(c.pool)}for(var t=v=0,q=c.length-1,y=n.length-1,G;q>=v&&y>=t;){var r=c[v],z=n[t];if(r!==z||a)if(null==r)v++;else if(null==z)t++;else if(r.key===z.key){var A=null!=u&&v>=c.length-u.length||null==u&&a;v++;t++;k(g,r,z,f,m(c,v,h),A,p);a&&r.tag===z.tag&&l(g,w(r),h)}else if(r=c[q],r!==z||a)if(null==r)q--;else if(null==z)t++;else if(r.key===z.key)A=null!=u&&q>=c.length-u.length||null==u&&a,k(g,r,z,f,m(c,q+1,h),A,p),(a||t<y)&&l(g,w(r),m(c,v,h)),q--,
t++;else break;else q--,t++;else v++,t++}for(;q>=v&&y>=t;){r=c[q];z=n[y];if(r!==z||a)if(null==r)q--;else{if(null!=z)if(r.key===z.key)A=null!=u&&q>=c.length-u.length||null==u&&a,k(g,r,z,f,m(c,q+1,h),A,p),a&&r.tag===z.tag&&l(g,w(r),h),null!=r.dom&&(h=r.dom),q--;else{if(!G){G=c;var r=q,A={},E;for(E=0;E<r;E++){var x=G[E];null!=x&&(x=x.key,null!=x&&(A[x]=E))}G=A}null!=z&&(r=G[z.key],null!=r?(A=c[r],k(g,A,z,f,m(c,q+1,h),a,p),l(g,w(A),h),c[r].skip=!0,null!=A.dom&&(h=A.dom)):h=e(g,z,f,void 0,h))}y--}else q--,
y--;if(y<t)break}d(g,n,t,y+1,f,h,p);b(c,v,q+1,n)}}function k(g,c,a,b,d,m,l){var n=c.tag;if(n===a.tag){a.state=c.state;a._state=c._state;a.events=c.events;var v;if(v=!m){var r,z;null!=a.attrs&&"function"===typeof a.attrs.onbeforeupdate&&(r=a.attrs.onbeforeupdate.call(a.state,a,c));"string"!==typeof a.tag&&"function"===typeof a._state.onbeforeupdate&&(z=a._state.onbeforeupdate.call(a.state,a,c));void 0===r&&void 0===z||r||z?v=!1:(a.dom=c.dom,a.domSize=c.domSize,a.instance=c.instance,v=!0)}if(!v)if("string"===
typeof n)switch(null!=a.attrs&&(m?(a.state={},C(a.attrs,a,b)):I(a.attrs,a,b)),n){case "#":c.children.toString()!==a.children.toString()&&(c.dom.nodeValue=a.children);a.dom=c.dom;break;case "<":c.children!==a.children?(w(c),f(g,a,d)):(a.dom=c.dom,a.domSize=c.domSize);break;case "[":p(g,c.children,a.children,m,b,d,l);c=0;b=a.children;a.dom=null;if(null!=b){for(m=0;m<b.length;m++){var y=b[m];null!=y&&null!=y.dom&&(null==a.dom&&(a.dom=y.dom),c+=y.domSize||1)}1!==c&&(a.domSize=c)}break;default:g=l;d=a.dom=
c.dom;switch(a.tag){case "svg":g="http://www.w3.org/2000/svg";break;case "math":g="http://www.w3.org/1998/Math/MathML"}"textarea"===a.tag&&(null==a.attrs&&(a.attrs={}),null!=a.text&&(a.attrs.value=a.text,a.text=void 0));l=c.attrs;n=a.attrs;v=g;if(null!=n)for(y in n)A(a,y,l&&l[y],n[y],v);if(null!=l)for(y in l)null!=n&&y in n||("className"===y&&(y="class"),"o"!==y[0]||"n"!==y[1]||E(y)?"key"!==y&&a.dom.removeAttribute(y):x(a,y,void 0));null!=a.attrs&&null!=a.attrs.contenteditable?u(a):null!=c.text&&
null!=a.text&&""!==a.text?c.text.toString()!==a.text.toString()&&(c.dom.firstChild.nodeValue=a.text):(null!=c.text&&(c.children=[B("#",void 0,void 0,c.text,void 0,c.dom.firstChild)]),null!=a.text&&(a.children=[B("#",void 0,void 0,a.text,void 0,void 0)]),p(d,c.children,a.children,m,b,null,g))}else{if(m)h(a,b);else{a.instance=B.normalize(a._state.view.call(a.state,a));if(a.instance===a)throw Error("A view cannot return the vnode it received as argument");null!=a.attrs&&I(a.attrs,a,b);I(a._state,a,b)}null!=
a.instance?(null==c.instance?e(g,a.instance,b,l,d):k(g,c.instance,a.instance,b,d,m,l),a.dom=a.instance.dom,a.domSize=a.instance.domSize):null!=c.instance?(q(c.instance,null),a.dom=void 0,a.domSize=0):(a.dom=c.dom,a.domSize=c.domSize)}}else q(c,null),e(g,a,b,l,d)}function w(a){var c=a.domSize;if(null!=c||null==a.dom){var b=D.createDocumentFragment();if(0<c){for(a=a.dom;--c;)b.appendChild(a.nextSibling);b.insertBefore(a,b.firstChild)}return b}return a.dom}function m(a,c,b){for(;c<a.length;c++)if(null!=
a[c]&&null!=a[c].dom)return a[c].dom;return b}function l(a,c,b){b&&b.parentNode?a.insertBefore(c,b):a.appendChild(c)}function u(a){var c=a.children;if(null!=c&&1===c.length&&"<"===c[0].tag)c=c[0].children,a.dom.innerHTML!==c&&(a.dom.innerHTML=c);else if(null!=a.text||null!=c&&0!==c.length)throw Error("Child node of a contenteditable must be trusted");}function b(a,c,b,d){for(;c<b;c++){var g=a[c];null!=g&&(g.skip?g.skip=!1:q(g,d))}}function q(a,c){function b(){if(++d===g&&(r(a),a.dom)){var b=a.domSize||
1;if(1<b)for(var e=a.dom;--b;){var h=e.nextSibling,f=h.parentNode;null!=f&&f.removeChild(h)}b=a.dom;e=b.parentNode;null!=e&&e.removeChild(b);if(b=null!=c&&null==a.domSize)b=a.attrs,b=!(null!=b&&(b.oncreate||b.onupdate||b.onbeforeremove||b.onremove));b&&"string"===typeof a.tag&&(c.pool?c.pool.push(a):c.pool=[a])}}var g=1,d=0;if(a.attrs&&"function"===typeof a.attrs.onbeforeremove){var e=a.attrs.onbeforeremove.call(a.state,a);null!=e&&"function"===typeof e.then&&(g++,e.then(b,b))}"string"!==typeof a.tag&&
"function"===typeof a._state.onbeforeremove&&(e=a._state.onbeforeremove.call(a.state,a),null!=e&&"function"===typeof e.then&&(g++,e.then(b,b)));b()}function r(a){a.attrs&&"function"===typeof a.attrs.onremove&&a.attrs.onremove.call(a.state,a);"string"!==typeof a.tag&&"function"===typeof a._state.onremove&&a._state.onremove.call(a.state,a);if(null!=a.instance)r(a.instance);else if(a=a.children,Array.isArray(a))for(var c=0;c<a.length;c++){var b=a[c];null!=b&&r(b)}}function A(a,c,b,d,e){var g=a.dom;if("key"!==
c&&"is"!==c&&(b!==d||"value"===c||"checked"===c||"selectedIndex"===c||"selected"===c&&a.dom===D.activeElement||"object"===typeof d)&&"undefined"!==typeof d&&!E(c)){var h=c.indexOf(":");if(-1<h&&"xlink"===c.substr(0,h))g.setAttributeNS("http://www.w3.org/1999/xlink",c.slice(h+1),d);else if("o"===c[0]&&"n"===c[1]&&"function"===typeof d)x(a,c,d);else if("style"===c)if(a=b,a===d&&(g.style.cssText="",a=null),null==d)g.style.cssText="";else if("string"===typeof d)g.style.cssText=d;else{"string"===typeof a&&
(g.style.cssText="");for(var f in d)g.style[f]=d[f];if(null!=a&&"string"!==typeof a)for(f in a)f in d||(g.style[f]="")}else c in g&&"href"!==c&&"list"!==c&&"form"!==c&&"width"!==c&&"height"!==c&&void 0===e&&!(a.attrs.is||-1<a.tag.indexOf("-"))?"input"===a.tag&&"value"===c&&a.dom.value==d&&a.dom===D.activeElement||"select"===a.tag&&"value"===c&&a.dom.value==d&&a.dom===D.activeElement||"option"===a.tag&&"value"===c&&a.dom.value==d||("input"===a.tag&&"type"===c?g.setAttribute(c,d):g[c]=d):"boolean"===
typeof d?d?g.setAttribute(c,""):g.removeAttribute(c):g.setAttribute("className"===c?"class":c,d)}}function E(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function x(a,c,b){var d=a.dom,e="function"!==typeof F?b:function(a){var c=b.call(d,a);F.call(d,a);return c};if(c in d)d[c]="function"===typeof b?e:null;else{var g=c.slice(2);void 0===a.events&&(a.events={});a.events[c]!==e&&(null!=a.events[c]&&d.removeEventListener(g,a.events[c],
!1),"function"===typeof b&&(a.events[c]=e,d.addEventListener(g,a.events[c],!1)))}}function C(a,c,b){"function"===typeof a.oninit&&a.oninit.call(c.state,c);"function"===typeof a.oncreate&&b.push(a.oncreate.bind(c.state,c))}function I(a,c,b){"function"===typeof a.onupdate&&b.push(a.onupdate.bind(c.state,c))}var D=a.document,J=D.createDocumentFragment(),F;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],d=D.activeElement;
null==a.vnodes&&(a.textContent="");Array.isArray(b)||(b=[b]);p(a,a.vnodes,B.normalizeChildren(b),!1,c,null,void 0);a.vnodes=b;for(var e=0;e<c.length;e++)c[e]();D.activeElement!==d&&d.focus()},setEventCallback:function(a){return F=a}}},H=function(a){function d(a){a=f.indexOf(a);-1<a&&f.splice(a,2)}function e(){for(var a=1;a<f.length;a+=2)f[a]()}a=P(a);a.setEventCallback(function(a){!1!==a.redraw&&e()});var f=[];return{subscribe:function(a,e){d(a);f.push(a,R(e))},unsubscribe:d,redraw:e,render:a.render}}(window);
K.setCompletionCallback(H.redraw);C.mount=function(a){return function(d,e){if(null===e)a.render(d,[]),a.unsubscribe(d);else{if(null==e.view&&"function"!==typeof e)throw Error("m.mount(element, component) expects a component, not a vnode");a.subscribe(d,function(){a.render(d,B(e))});a.redraw()}}}(H);var U=x,L=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var d={},e={},f=0;f<a.length;f++){var h=a[f].split("="),p=decodeURIComponent(h[0]),h=2===h.length?
decodeURIComponent(h[1]):"";"true"===h?h=!0:"false"===h&&(h=!1);var k=p.split(/\]\[?|\[/),w=d;-1<p.indexOf("[")&&k.pop();for(var m=0;m<k.length;m++){var p=k[m],l=k[m+1],l=""==l||!isNaN(parseInt(l,10)),u=m===k.length-1;""===p&&(p=k.slice(0,m).join(),null==e[p]&&(e[p]=0),p=e[p]++);null==w[p]&&(w[p]=u?h:l?[]:{});w=w[p]}}return d},V=function(a){function d(d){var e=a.location[d].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===d&&"/"!==e[0]&&(e="/"+e);return e}function e(a){return function(){null==
k&&(k=p(function(){k=null;a()}))}}function f(a,d,e){var b=a.indexOf("?"),f=a.indexOf("#"),h=-1<b?b:-1<f?f:a.length;if(-1<b){var b=L(a.slice(b+1,-1<f?f:a.length)),k;for(k in b)d[k]=b[k]}if(-1<f)for(k in d=L(a.slice(f+1)),d)e[k]=d[k];return a.slice(0,h)}var h="function"===typeof a.history.pushState,p="function"===typeof setImmediate?setImmediate:setTimeout,k,w={prefix:"#!",getPath:function(){switch(w.prefix.charAt(0)){case "#":return d("hash").slice(w.prefix.length);case "?":return d("search").slice(w.prefix.length)+
d("hash");default:return d("pathname").slice(w.prefix.length)+d("search")+d("hash")}},setPath:function(d,e,k){var b={},l={};d=f(d,b,l);if(null!=e){for(var m in e)b[m]=e[m];d=d.replace(/:([^\/]+)/g,function(a,d){delete b[d];return e[d]})}(m=F(b))&&(d+="?"+m);(l=F(l))&&(d+="#"+l);h?(l=k?k.state:null,m=k?k.title:null,a.onpopstate(),k&&k.replace?a.history.replaceState(l,m,w.prefix+d):a.history.pushState(l,m,w.prefix+d)):a.location.href=w.prefix+d},defineRoutes:function(d,k,p){function b(){var b=w.getPath(),
e={},h=f(b,e,e),l=a.history.state;if(null!=l)for(var m in l)e[m]=l[m];for(var u in d)if(l=new RegExp("^"+u.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),l.test(h)){h.replace(l,function(){for(var a=u.match(/:[^\/]+/g)||[],f=[].slice.call(arguments,1,-2),h=0;h<a.length;h++)e[a[h].replace(/:|\./g,"")]=decodeURIComponent(f[h]);k(d[u],e,b,u)});return}p(b,e)}h?a.onpopstate=e(b):"#"===w.prefix.charAt(0)&&(a.onhashchange=b);b()}};return w};C.route=function(a,d){var e=V(a),f=function(a){return a},
h,p,k,w,m,l=function(a,b,l){if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var u=function(){null!=h&&d.render(a,h(B(p,k.key,k)))},q=function(a){if(a!==b)e.setPath(b,null,{replace:!0});else throw Error("Could not resolve default route "+b);};e.defineRoutes(l,function(a,b,d){var e=m=function(a,l){e===m&&(p=null==l||"function"!==typeof l.view&&"function"!==typeof l?"div":l,k=b,w=d,m=null,h=(a.render||f).bind(a),u())};a.view||"function"===typeof a?e({},
a):a.onmatch?U.resolve(a.onmatch(b,d)).then(function(b){e(a,b)},q):e(a,"div")},q);d.subscribe(a,u)};l.set=function(a,b,d){null!=m&&(d={replace:!0});m=null;e.setPath(a,b,d)};l.get=function(){return w};l.prefix=function(a){e.prefix=a};l.link=function(a){a.dom.setAttribute("href",e.prefix+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=!1,a=this.getAttribute("href"),0===a.indexOf(e.prefix)&&(a=a.slice(e.prefix.length)),l.set(a,void 0,
void 0))}};l.param=function(a){return"undefined"!==typeof k&&"undefined"!==typeof a?k[a]:k};return l}(window,H);C.withAttr=function(a,d,e){return function(f){d.call(e||this,a in f.currentTarget?f.currentTarget[a]:f.currentTarget.getAttribute(a))}};var W=P(window);C.render=W.render;C.redraw=H.redraw;C.request=K.request;C.jsonp=K.jsonp;C.parseQueryString=L;C.buildQueryString=F;C.version="1.0.1";C.vnode=B;"undefined"!==typeof module?module.exports=C:window.m=C})();